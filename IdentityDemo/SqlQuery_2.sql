EXECUTE sp_rename @objname = N'dbo.AspNetRoles', @newname = N'Roles', @objtype = N'OBJECT'
IF object_id('[PK_dbo.AspNetRoles]') IS NOT NULL BEGIN
    EXECUTE sp_rename @objname = N'[PK_dbo.AspNetRoles]', @newname = N'PK_dbo.Roles', @objtype = N'OBJECT'
END
EXECUTE sp_rename @objname = N'dbo.AspNetUserRoles', @newname = N'UserRole', @objtype = N'OBJECT'
IF object_id('[PK_dbo.AspNetUserRoles]') IS NOT NULL BEGIN
    EXECUTE sp_rename @objname = N'[PK_dbo.AspNetUserRoles]', @newname = N'PK_dbo.UserRole', @objtype = N'OBJECT'
END
EXECUTE sp_rename @objname = N'dbo.AspNetUserClaims', @newname = N'UserClaim', @objtype = N'OBJECT'
IF object_id('[PK_dbo.AspNetUserClaims]') IS NOT NULL BEGIN
    EXECUTE sp_rename @objname = N'[PK_dbo.AspNetUserClaims]', @newname = N'PK_dbo.UserClaim', @objtype = N'OBJECT'
END
EXECUTE sp_rename @objname = N'dbo.AspNetUserLogins', @newname = N'UserLogin', @objtype = N'OBJECT'
IF object_id('[PK_dbo.AspNetUserLogins]') IS NOT NULL BEGIN
    EXECUTE sp_rename @objname = N'[PK_dbo.AspNetUserLogins]', @newname = N'PK_dbo.UserLogin', @objtype = N'OBJECT'
END
IF object_id(N'[dbo].[FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[AspNetUserClaims] DROP CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId]
IF object_id(N'[dbo].[FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[AspNetUserLogins] DROP CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId]
IF object_id(N'[dbo].[FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[AspNetUserRoles] DROP CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_UserId' AND object_id = object_id(N'[dbo].[UserRole]', N'U'))
    DROP INDEX [IX_UserId] ON [dbo].[UserRole]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'UserNameIndex' AND object_id = object_id(N'[dbo].[AspNetUsers]', N'U'))
    DROP INDEX [UserNameIndex] ON [dbo].[AspNetUsers]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_UserId' AND object_id = object_id(N'[dbo].[UserClaim]', N'U'))
    DROP INDEX [IX_UserId] ON [dbo].[UserClaim]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_UserId' AND object_id = object_id(N'[dbo].[UserLogin]', N'U'))
    DROP INDEX [IX_UserId] ON [dbo].[UserLogin]
EXECUTE sp_rename @objname = N'dbo.AspNetUsers.Id', @newname = N'UserId', @objtype = N'COLUMN'
EXECUTE sp_rename @objname = N'dbo.UserClaim.Id', @newname = N'UserClaimId', @objtype = N'COLUMN'
CREATE TABLE [dbo].[User] (
    [UserId] [nvarchar](128) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.User] PRIMARY KEY ([UserId])
)
CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[User]([UserName])
ALTER TABLE [dbo].[UserRole] ADD [IdentityUser_Id] [nvarchar](128)
ALTER TABLE [dbo].[UserClaim] ADD [IdentityUser_Id] [nvarchar](128)
ALTER TABLE [dbo].[UserLogin] ADD [IdentityUser_Id] [nvarchar](128)
ALTER TABLE [dbo].[UserClaim] ALTER COLUMN [UserId] [nvarchar](max) NULL
CREATE INDEX [IX_IdentityUser_Id] ON [dbo].[UserRole]([IdentityUser_Id])
CREATE INDEX [IX_IdentityUser_Id] ON [dbo].[UserClaim]([IdentityUser_Id])
CREATE INDEX [IX_IdentityUser_Id] ON [dbo].[UserLogin]([IdentityUser_Id])
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUsers]([UserId])
ALTER TABLE [dbo].[AspNetUsers] ADD CONSTRAINT [FK_dbo.AspNetUsers_dbo.User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([UserId])
ALTER TABLE [dbo].[UserClaim] ADD CONSTRAINT [FK_dbo.UserClaim_dbo.User_IdentityUser_Id] FOREIGN KEY ([IdentityUser_Id]) REFERENCES [dbo].[User] ([UserId])
ALTER TABLE [dbo].[UserLogin] ADD CONSTRAINT [FK_dbo.UserLogin_dbo.User_IdentityUser_Id] FOREIGN KEY ([IdentityUser_Id]) REFERENCES [dbo].[User] ([UserId])
ALTER TABLE [dbo].[UserRole] ADD CONSTRAINT [FK_dbo.UserRole_dbo.User_IdentityUser_Id] FOREIGN KEY ([IdentityUser_Id]) REFERENCES [dbo].[User] ([UserId])
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'Email';
IF @var0 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var0 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [Email]
DECLARE @var1 nvarchar(128)
SELECT @var1 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'EmailConfirmed';
IF @var1 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var1 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [EmailConfirmed]
DECLARE @var2 nvarchar(128)
SELECT @var2 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'PasswordHash';
IF @var2 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var2 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [PasswordHash]
DECLARE @var3 nvarchar(128)
SELECT @var3 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'SecurityStamp';
IF @var3 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var3 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [SecurityStamp]
DECLARE @var4 nvarchar(128)
SELECT @var4 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'PhoneNumber';
IF @var4 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var4 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [PhoneNumber]
DECLARE @var5 nvarchar(128)
SELECT @var5 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'PhoneNumberConfirmed';
IF @var5 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var5 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [PhoneNumberConfirmed]
DECLARE @var6 nvarchar(128)
SELECT @var6 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'TwoFactorEnabled';
IF @var6 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var6 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [TwoFactorEnabled]
DECLARE @var7 nvarchar(128)
SELECT @var7 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'LockoutEndDateUtc';
IF @var7 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var7 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [LockoutEndDateUtc]
DECLARE @var8 nvarchar(128)
SELECT @var8 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'LockoutEnabled';
IF @var8 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var8 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [LockoutEnabled]
DECLARE @var9 nvarchar(128)
SELECT @var9 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'AccessFailedCount';
IF @var9 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var9 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [AccessFailedCount]
DECLARE @var10 nvarchar(128)
SELECT @var10 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.AspNetUsers')
AND col_name(parent_object_id, parent_column_id) = 'UserName';
IF @var10 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[AspNetUsers] DROP CONSTRAINT [' + @var10 + ']')
ALTER TABLE [dbo].[AspNetUsers] DROP COLUMN [UserName]
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201508061900291_API', N'IdentityDemo1.Models.ApplicationDbContext',  0x1F8B0800000000000400DD5C6D6FE33612FE7EC0FD07419FDA436AC7C9ED622FB05B649DB817DC2659ACB3C57D0B68897684952857A2D20487FEB27EB89F747FE148BDF255A25EECD845812216C96786C3E10C399CD9FFFDF1DFE94F2F816F3DC328F64234B327A353DB82C8095D0F6D667682D73F7CB07FFAF1AF7F995EBBC18BF54BD1EF9CF62323513CB39F30DE5E8CC7B1F30403108F02CF89C2385CE391130663E086E3B3D3D37F8C279331241036C1B2ACE99704612F80E90FF2731E22076E7102FCDBD0857E9C7F272DCB14D5BA03018CB7C08133FBC685642C7EBD8241381965FD6DEBD2F700E16509FDB56D0184420C30E1F4E26B0C97380AD166B9251F80FFF0BA85A4DF1AF831CC67705175379DCCE9199DCCB81A584039498CC3A025E0E43C97CE581CDE49C676293D22BFEB545674D6A90C2BF17D097D220091E0C5DC8F68E7997D5B92B88CB777108F8A81A30C721111B8DFC2E8DB88453CB18CC79D94DA74363AA5FF9D58F3C4C749046708263802FE89F53959F99EF32FF8FA107E8368763E59ADCF3FBC7B0FDCF3F77F87E7EFD89992B9927EDC07F2E973146E61447883EB72FEB635E6C78DC581E530664C2615A24B6463D8D62D78F904D1063F912D73F6C1B616DE0B748B2FB9727D451ED94764108E12F2F32EF17DB0F261D93EAEA549FF5F43F5ECDDFB41A8DE81676F932EBD409F6C9C88ECAB2FD04F5BE3276F9B6D2F6EBD1FF36E8B280CE86F5EBFB2D6C76598440E9D4CA8EDF200A20DC43C77D371A5BC462A4DA18657EB02F5F0559B722AABB7B22B9D50979D5090D8F76E28F8DD2D5D638DBBDC6EC9E2A5AA452552A7702A773512C69F585CAF4A7D26A6EA83C8B46CEB2388612E2176A3A62CD68A37213D1604A2C1E8903F8D84DC7B17CF7DE005C36FE314F6F0F7713F177583F0F99942D119312E7118C19F218211C0D0FD0C308611AA56A06933361A812E7A229349578BD2D80FA55F809F1C84F27F0A371E1A5EF953D8C357FE944DF2F9D973A96135F0654567026FD45FED269BB798C0D9BE5D2037CD7D13DF8FDFEFB45D86DF2987BF498EE512731D00CF1FE0166340651EA2B51705B09CE5C7909C19016ABFCF401C93A575FF09E2A79D7B9E2574928828D4128360BB736A9F9F4204EF9260556BBF06A735D8D23CFC162E80430E2FD7888EEA8DF72974BE8509BE46EE1539087DC54E01487F3E788139C020EC5C3A0E8CE3055166E8CEC304E1A6235DB3CD7EEB28427AB2AA0F2350361F8B7E721C8169D60612D83EAA48421D87A95737E0B0E8A7E1306BAEE730EFD396438A64C060DE4DC35FDA5ACF5ED6A54D24E6328E43C74BB9524417F3D8103F4BB2D7ACE640917C87CDE23AB7C4B77AF4EA4CBE10A7658B9EF21E5D411F62685D3A59F4750E6207B8B2C29209B92D182B84A2B95CAB98FB9B4493B86F18D141803AAB981C0E3C84655FEF21C7DB02BF514AC248C373029D7B49436CB9825B8828C14649981057C7982803251D61519A24341D331A67A688AC75695A70A5A9D1845384D53E1D8D26D282D75368D0A93C0452AB545DE591DB32236E45C336BC3C04B3A8A190DF8A77228FCC741A312BD8D1E1A5C15BE1EE06472B8BCC9493FD85C9EE82911CD1BC5AD146F88215372B423CBF5CC5F9D9409C14055F42CCFBAECA7D28CDBA24191E449C791D60259D16A0C5E9A31635DF902D608B23432D6CAED72D609B10253046116444F61587E9A87FEB11ADB991472FE753AA84E4158C1C3083A3D00AD1C9F3136F2114EE4CAA978AD6B918BB17CD7CCCE4A3F2261AC0622EC34AA850F00609A9DC8DB1C3E92F21C1BF68008BB90C2BA15C311B04A4F03FA61EA8BF78788733D0062B6E0CA59BA9323AC6594A4791FA31D6E47E4C6FC1764BEEAB4C2E48FEC55A668920F31F96EDF323820C63ECC48A348992DB92120E23B081422B214D385D78518CAF00062B406FC4733790BA299DAAC6D0172459BF29AF6061F68BDEF46F5EEDB87746CECDCA67F61C6541E618D0537FFA2EA4D000F5F0343B07F82052041AE7A19F04487F09D18FCE2216ECF8EC8B8C301D0BFC4BF70C495ED2259017BED1D2C8DB62B0652A0F2FDD974A0FA1137811DA6745AECB24D0A314973D164577013C88A51B60D9C42C80F6AB96BD2E28D9D18BBAFF62F1CFFD2C16DF32FCC2358939A67FDFAFBF6BDC26DFF7DC23FB1477FE0AC282E49F5A62308174098C693347E5DF3A584CBEC51C5178D0602185A6165CB2CF161C936C43273C8D44D53DCC29C80F152CBADC6A8EAC78B260A115CD1DB0153C8B6DE6A88A570D1658D16C8E5D3D71883BF4800F0DDA0B638F5343169CE8671235186DEC620AD1CE380E73FC6072855820E6734BAC3C1B4802CBBF1FA46269EFD93D142B0B4FF5532C0D86DE0C717936BC15AA4D0ED26372C9339CA5AF4B1ED2E3B5D3DA5DEB067F0DD72B4819D26AA100E598D6A683061C249BA10D85C94233BC5C3288EAD726868D6E1C6ADFBCFADBC55AEEC8D1C3F5D2378B9B98BEC097AFEF2D0420C668FAE94F11246BA33FC598D616A26975F840E121EA0F1F7934E4B08FF91BD6F8F5377D47A6DE7994B38D76E743DA86639A34870BF21EA26A7351E31D68CE1071A603D03E290E2E76298F06653C5C887B4FF318747361A41494CEBAD856B1CDC915FC35C63018D10EA3E5AFFEDCF720BD70151D6E01F2D630C659A2AA7D763A39132A2B0FA7CA711CC7AEDFA2D4915FB83D64D9A26710394F2092F36C7B540256A0D2D3FC0D72E1CBCCFE4F3AEA227DE9A17FA59F4F88927F45DEAF096978881268FD2EA7010E9F99DD55EE5A6FB2AB3AB6C1968A2F53335FAC9B7F3F66434FACFB886CC40BEB5458A22EDC48D6AB035B0286297F0395C20CA73D6FA6125C0ABC1255D87DDD33DE571E1E24DBBDE0F2BB00BC7CDF963565467B2F4445D6FA50788388509795DE054B9B91EE929F38CD486F375975867A17D6B4D9E91E6A0F26E6A69BDBA462E41BFA3545B4C3DC3469420166F6A91CCC48BEB198B357A957AF9D265570F647E3AA347BC11DBF7754444DFE94359683F9624509E560D83B3A3E1CA7966AF31ADEE6086720A36CE8A0C76F3E97A2B5C5DA79D1CDA1D4D95429DB6F5B5EB3CF8A9A9A4CAF3F4921CD2E8A23F214FC1E15337DF54493E7D52286D14D5774EFFB2A056D8CFAEE5B6B5A941BED426BF20A8B1E7545C7AA35BAC7FBA3D01AF3A2AC5D28CD5B3BA4B75299168EF010344648C17DA40B56613ED26268FEF8FB103EEA0FA73DD5AB4EB758A22C1EF7DD405B8F46A96A539B5B911C5C8D8427B922BC20D574886B99BFEEAA5E979A2A1CB3A7B899EDAE42B2FCD9915F5D53A32353D91D2DA9AA8B8A5CD5DA826263A9A18E52FBFA4BB3F24B1DBD8ED59966C5993AA266B59BDC1697C871AD2A425C8703A8EC54D688A914ABC1B7D6654B1C4125A77602C662E0B45E93527704059BFD05C1ED444D6ED8C1D765F617C33EB645DFF3924262831EC10616AFC2F44A75573B296A959376C87985F937CFC97129F63615044D4742D0E14E2A659F1BB40E8B0393C051D145083DDE420C5C728CB98CB0B7060E26CDF4F12EFDE79FD21714FA84BC82EE0DBA4FF036C164CA3058F95C6C9F1EBCEAE8A795BB3CCFD3FB6DFA2F140D3105C2A6471F3DEFD1C7C4F3DD92EF85E2114F03414F74F9C3185D4B4C1FC836AF25D25D880C8172F19507D107186C7D0216DFA32578865D7823BAF7096E80F35A3D76E8409A178217FBF4CA039B0804718E518D273F890EBBC1CB8FFF07DF1A96B4FA5F0000 , N'6.1.3-40302')

