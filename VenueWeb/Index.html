<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <link href="Content/bootstrap.css" rel="stylesheet" />
</head>
<body>

    <!--{{#each }}
    <h2><a href="/posts/{{../permalink}}#{{id}}">{{title}}</a></h2>
    <div>{{body}}</div>
    {{/each}}-->

    <br />
    <br />
    <script type="text/x-handlebars-template" id="events_template">
        <div class="" style="margin-left:20px;">
            <div class="col-md-3 text-center">
                <div class="panel panel-primary">
                    <div class="panel-heading">{{ date }}</div>
                    <div class="panel-body">
                        <label>Event Name : </label> <a href="#" class="btn btn-link"> {{ name }}</a>
                    </div>
                    <div class="panel-footer">
                        <label> Start Time : <label class="text-success">{{ startTime }}</label></label>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/x-handlebars-template" id="event_details">
        <div class="" style="margin-left:20px;">
            <div class="col-md-3 text-center">
                <div class="panel panel-primary">
                    <div class="panel-heading">{{ name }}</div>
                    <div class="panel-body">
                        <label class="text-info"> {{ description }}</label><br />
                        <span class="text-info">
                            <label class="text-info"> Sessions </label>
                            {{#each sessions}}
                            <br />
                            <label class="label label-primary"> Title : {{ Title }} </label>
                            <br />
                            <label class="label label-info"> Description : {{ Description }} </label>
                            <br />
                            <label class="label label-info"> Speaker Name : {{ Speaker id}} </label>
                            {{/each}}
                        </span>
                        <label class="text-danger"> {{ Venues.address }} , {{ Venues.street }}</label>
                    </div>
                    <div class="panel-footer">
                        <label> Start Time : <label class="text-success">{{ startTime }}</label></label>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script src="Scripts/underscore.js"></script>
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script src="Scripts/backbone.js"></script>
    <script src="Scripts/handlebars-v4.0.2.js"></script>
    <script src="App/Views/EventsView.js"></script>
    <script src="App/Models/EventModel.js"></script>
    <script>
        $(document).ready(function () {
            var view = new EventView();
            view.render();
            view.eventDetails();
            Handlebars.registerHelper('Speaker', function (speakerId) {
                var eventModel = new EventModel();
                eventModel.fetch({
                    success: function (data) {
                        var data = data.toJSON();
                        _.each(data, function (speaker, index) {
                            if (speaker.speaker[index].id == speakerId) {
                                return speaker.speaker[index].name;
                            }
                        })
                    }
                });
            });
        });
    </script>
</body>
</html>
